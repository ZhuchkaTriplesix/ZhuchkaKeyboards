# üìä –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTP –ú–µ—Ç—Ä–∏–∫ –≤ Grafana

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Grafana**: http://localhost:3000
2. **–õ–æ–≥–∏–Ω**: `admin`
3. **–ü–∞—Ä–æ–ª—å**: `admin123`

## üìà –î–æ—Å—Ç—É–ø–Ω—ã–µ Dashboards

### 1. **ZhuchkaKeyboards - Application Overview**
- –û—Å–Ω–æ–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- HTTP –º–µ—Ç—Ä–∏–∫–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥

### 2. **HTTP Metrics Dashboard**
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- 10+ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏ –ø–∞–Ω–µ–ª–µ–π –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ API

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

### HTTP –ú–µ—Ç—Ä–∏–∫–∏
- **Request Rate**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É
- **Response Time**: –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ (—Å—Ä–µ–¥–Ω., 95%, 99%)
- **Error Rate**: –ü—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫
- **Status Codes**: –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–æ–¥–∞–º –æ—Ç–≤–µ—Ç–∞
- **User Agents**: –ê–Ω–∞–ª–∏–∑ –∫–ª–∏–µ–Ω—Ç–æ–≤ (–±—Ä–∞—É–∑–µ—Ä—ã, curl, etc.)
- **Request/Response Sizes**: –†–∞–∑–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- **Slow Requests**: –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (>1s)

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- **Database Connections**: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
- **Redis Operations**: –û–ø–µ—Ä–∞—Ü–∏–∏ —Å Redis
- **Memory/CPU Usage**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- **Application Errors**: –û—à–∏–±–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üìã –ü–æ–ª–µ–∑–Ω—ã–µ Prometheus –∑–∞–ø—Ä–æ—Å—ã

```promql
# –¢–æ–ø-10 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –ø–æ —Ç—Ä–∞—Ñ–∏–∫—É
topk(10, sum by (endpoint) (rate(http_requests_total[5m])))

# –ü—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫ –ø–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º
rate(http_errors_by_type_total[5m]) / rate(http_requests_total[5m])

# 95-–π –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞
histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))

# –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
rate(http_slow_requests_total[5m])

# –ó–∞–ø—Ä–æ—Å—ã –ø–æ User Agent
sum by (user_agent_family) (rate(http_requests_by_user_agent_total[5m]))

# –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
sum(http_requests_in_progress)
```

## üé® –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∞–ª–µ—Ä—Ç—ã:
1. **–í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫** (>5%)
2. **–ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** (>1s)
3. **–í—ã—Å–æ–∫–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞** (95% >500ms)
4. **–ú–Ω–æ–≥–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤** (>20)

### –°–æ–∑–¥–∞–Ω–∏–µ –∞–ª–µ—Ä—Ç–∞:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Dashboard
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–∞–Ω–µ–ª—å ‚Üí Edit
3. Alert tab ‚Üí Create Alert
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É—Å–ª–æ–≤–∏—è –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å:
- **Request Rate**: –ù–æ—Ä–º–∞–ª—å–Ω—ã–π –ª–∏ —Ç—Ä–∞—Ñ–∏–∫?
- **Error Rate**: –ï—Å—Ç—å –ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å API?
- **Response Time**: –ë—ã—Å—Ç—Ä–æ –ª–∏ –æ—Ç–≤–µ—á–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ?
- **Status Codes**: –ú–Ω–æ–≥–æ –ª–∏ 4xx/5xx –æ—à–∏–±–æ–∫?
- **User Agents**: –ö—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç API?

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- **Spike –≤ Error Rate** ‚Üí –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–æ–º/–ë–î
- **–í—ã—Å–æ–∫–∏–π Response Time** ‚Üí –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
- **–ú–Ω–æ–≥–æ 404** ‚Üí –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ URL –≤ –∫–ª–∏–µ–Ω—Ç–∞—Ö
- **–í—ã—Å–æ–∫–∏–π Request Rate** ‚Üí –í–æ–∑–º–æ–∂–Ω–∞—è –∞—Ç–∞–∫–∞/–±–æ—Ç

## üõ†Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–∞–Ω–µ–ª–µ–π:
1. Dashboard ‚Üí Add Panel
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Prometheus –∑–∞–ø—Ä–æ—Å
4. –î–æ–±–∞–≤—å—Ç–µ –ª–µ–π–±–ª—ã –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –≠–∫—Å–ø–æ—Ä—Ç/–ò–º–ø–æ—Ä—Ç:
- **–≠–∫—Å–ø–æ—Ä—Ç**: Dashboard Settings ‚Üí JSON Model
- **–ò–º–ø–æ—Ä—Ç**: + ‚Üí Import ‚Üí Upload JSON

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
- –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ endpoint, method, status_code
- Settings ‚Üí Variables ‚Üí Add Variable

## üì± –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

Grafana –∏–º–µ–µ—Ç –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:
- iOS: Grafana Mobile
- Android: Grafana Mobile

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **Grafana Documentation**: https://grafana.com/docs/
- **Prometheus Queries**: https://prometheus.io/docs/prometheus/latest/querying/
- **PromQL Tutorial**: https://prometheus.io/docs/prometheus/latest/querying/basics/

---

## üéØ –ì–æ—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
for i in {1..20}; do
  curl http://localhost:8001/api/health
  curl http://localhost:8001/api/metrics-summary  
  curl http://localhost:8001/api/metrics/http
  sleep 1
done

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫
curl http://localhost:8001/metrics | grep http_requests

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Grafana
curl http://localhost:3000/api/health
```

–¢–µ–ø–µ—Ä—å –≤–∞—à–∏ HTTP –º–µ—Ç—Ä–∏–∫–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ Grafana! üéâ
